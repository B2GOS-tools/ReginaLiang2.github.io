(window.webpackJsonp=window.webpackJsonp||[]).push([[305],{380:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return b})),n.d(t,"default",(function(){return p}));var a=n(3),o=n(8),r=(n(0),n(396)),l=n(398),i={id:"os-env-setup",title:"OS ENV Setup"},c={unversionedId:"02.getting-started/01.env-setup/os-env-setup",id:"version-sfp-3.0/02.getting-started/01.env-setup/os-env-setup",isDocsHomePage:!1,title:"OS ENV Setup",description:"Instructions for users who have access to a debug device",source:"@site/versioned_docs/version-sfp-3.0/02.getting-started/01.env-setup/os-env-setup.md",slug:"/02.getting-started/01.env-setup/os-env-setup",permalink:"/docs/sfp-3.0/02.getting-started/01.env-setup/os-env-setup",version:"sfp-3.0",sidebar:"version-sfp-3.0/docs",previous:{title:"3.0 Overview",permalink:"/docs/sfp-3.0/01.introduction/overview"},next:{title:"Simulator",permalink:"/docs/sfp-3.0/02.getting-started/01.env-setup/simulator"}},b=[{value:"Windows",id:"windows",children:[{value:"Install Firefox",id:"install-firefox",children:[]},{value:"Install ADB",id:"install-adb",children:[]},{value:"Connecting to Device",id:"connecting-to-device",children:[]},{value:"Install your first app",id:"install-your-first-app",children:[]}]},{value:"macOS",id:"macos",children:[{value:"Install ADB",id:"install-adb-1",children:[]},{value:"Install and Run app",id:"install-and-run-app",children:[]}]},{value:"Linux",id:"linux",children:[{value:"Install Firefox",id:"install-firefox-1",children:[]},{value:"Setting WebIDE",id:"setting-webide",children:[]},{value:"Installing make(<strong>Optional</strong>)",id:"installing-makeoptional",children:[]},{value:"Setting the required architectures(<strong>Optional</strong>)",id:"setting-the-required-architecturesoptional",children:[]},{value:"Installing dependencies(<strong>Optional</strong>)",id:"installing-dependenciesoptional",children:[]},{value:"Setting ccache(<strong>Optional</strong>)",id:"setting-ccacheoptional",children:[]},{value:"Installing ADB and fastboot",id:"installing-adb-and-fastboot",children:[]},{value:"Setting USB access",id:"setting-usb-access",children:[]}]},{value:"Connection Errors",id:"connection-errors",children:[]}],s={rightToc:b};function p(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},Object(r.b)("em",{parentName:"strong"},"Instructions for users who have access to a debug device"))),Object(r.b)("h2",{id:"windows"},"Windows"),Object(r.b)("h3",{id:"install-firefox"},"Install Firefox"),Object(r.b)("p",null,"Download ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://ftp.mozilla.org/pub/firefox/releases/59.0/win64/en-US/"}),"firefox v59")," ",Object(r.b)("strong",{parentName:"p"},"before installing make sure the previous version of firefox is uninstalled"),"."),Object(r.b)("p",null,"Disabling auto updates once Firefox is installed. (Menu -> options -> general)"),Object(r.b)("img",{alt:"win-firefox-config",className:"responsive-img",src:Object(l.a)("img/env-setup/win-firefox-config.png")}),Object(r.b)("h3",{id:"install-adb"},"Install ADB"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Visit this Google page to Download the ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://dl.google.com/android/repository/platform-tools-latest-windows.zip"}),"ADB ZIP file")," for Windows.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Unzip the folder on your Windows C Drive ",Object(r.b)("strong",{parentName:"p"},"(C:\\platform-tools)"),"."))),Object(r.b)("h3",{id:"connecting-to-device"},"Connecting to Device"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Connect your device with the laptop using USB cable. Make sure it is in debug mode. ")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Open the ",Object(r.b)("strong",{parentName:"p"},"Settings")," app and follow this flow:"))),Object(r.b)("p",null,Object(r.b)("em",{parentName:"p"},Object(r.b)("strong",{parentName:"em"},"Device")," > ",Object(r.b)("strong",{parentName:"em"},"Developer")," > ",Object(r.b)("strong",{parentName:"em"},"Debugger")," > ",Object(r.b)("strong",{parentName:"em"},"ADB and DevTools"))),Object(r.b)("div",{className:"media-block"},Object(r.b)("img",{src:Object(l.a)("img/env-setup/settings-device.png")}),Object(r.b)("img",{src:Object(l.a)("img/env-setup/debugger.png")})),Object(r.b)("ol",{start:3},Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Open command prompt of your laptop.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Run "))),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-console"}),"$ cd /path/to/extracted/folder/\n")),Object(r.b)("ol",{start:5},Object(r.b)("li",{parentName:"ol"},"Run")),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-console"}),"$ adb devices\n")),Object(r.b)("p",null,"You should see your device has been detected."),Object(r.b)("ol",{start:6},Object(r.b)("li",{parentName:"ol"},"Run")),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-console"}),"$ adb root\n$ adb forward tcp:6000 localfilesystem:/data/local/debugger-socket\n")),Object(r.b)("p",null,"This is to establish a path between your device and the laptop."),Object(r.b)("img",{alt:"adb-windows",className:"responsive-img",src:Object(l.a)("img/env-setup/adb-windows.png")}),Object(r.b)("ol",{start:7},Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Open Firefox Web IDE. Click on \u201cRemote Runtime\u201d on the right side. Press \u201cOK\u201d.\nA warning about old connected runtime version would pop up. Ignore it.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"You are ready to install an app on your device"))),Object(r.b)("h3",{id:"install-your-first-app"},"Install your first app"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Open Firefox Web IDE and make sure you have connected your device and executed the commands")),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-console"}),"$ adb root\n$ adb forward tcp:6000 localfilesystem:/data/local/debugger-socket\n")),Object(r.b)("ol",{start:2},Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"If you have packaged app stored on your laptop,\nclick \u201cOpen Packaged App\u201d on the left side and select your project folder.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Your project folder must have a manifest.webapp file. Otherwise, the IDE cannot open your app.\nCheck ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/getting-started/main-concepts/manifest"}),"here")," to create manifest.webapp file.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"After selecting your app, you should be able to see your app."))),Object(r.b)("img",{alt:"webide-windows-app",className:"responsive-img",src:Object(l.a)("img/env-setup/webide-windows-app.png")}),Object(r.b)("ol",{start:5},Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Install the app on your device with ",Object(r.b)("strong",{parentName:"p"},"RUN")," button and ",Object(r.b)("strong",{parentName:"p"},"Debugger")," button to debug top center of WebIDE.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Install the app.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Then, you are available to use the basic tools in the web IDE for development,\nsuch as Inspector, Console, JavaScript Debugger, Style Editor, Scratchpad."))),Object(r.b)("h2",{id:"macos"},"macOS"),Object(r.b)("h3",{id:"install-adb-1"},"Install ADB"),Object(r.b)("p",null,"You can follow ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://stackoverflow.com/questions/31374085/installing-adb-on-macos"}),"this link")," install ADB tools for macOS."),Object(r.b)("h3",{id:"install-and-run-app"},"Install and Run app"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Download ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"http://download-installer.cdn.mozilla.net/pub/firefox/nightly/2017/11/2017-11-19-22-01-26-mozilla-central/firefox-59.0a1.en-US.mac.dmg"}),"firefox v59"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"open ",Object(r.b)("strong",{parentName:"p"},"terminal")," and run these commands"))),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-console"}),'$ ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"\n$ brew cask install android-platform-tools\n')),Object(r.b)("p",null,"connect device and run"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-console"}),"adb devices\n")),Object(r.b)("p",null,"You should see 1 device connected."),Object(r.b)("ol",{start:3},Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"disconnect from internet, install downloaded firefox, go to prefferences and disable updates (download or check): Connect to internet")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Go to about:config, turn the following preferences: xpinstall.signatures.required = false, extensions.legacy.enabled = true")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Go to ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://ftp.mozilla.org/pub/labs/fxos-simulator/"}),"this link")," and download ",Object(r.b)("strong",{parentName:"p"},"install adb helper"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"In Firefox Tools > Add on > Extension and add the downloaded ",Object(r.b)("strong",{parentName:"p"},"adb_helper.xpi")," file")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"In firefox go to Tools > Web Developer > WebIDE")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},'On right should see "USB Devices" and should have one device')),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},'On the left have "Open Packaged App" - click it, and choose some app (a folder)')),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Middle top click the play button... that's it, app should be on your phone and you should notice it."))),Object(r.b)("h2",{id:"linux"},"Linux"),Object(r.b)("h3",{id:"install-firefox-1"},"Install Firefox"),Object(r.b)("p",null,"You will need to get the ",Object(r.b)("strong",{parentName:"p"},"Firefox v59 or older version")," for KaiOS implementations, to download these versions, you can get them through ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://ftp.mozilla.org/pub/firefox/releases/"}),"Mozilla FTP"),"."),Object(r.b)("p",null,"After downloading the chosen version, you must unpack the package with the command:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-console"}),"$ tar jxvf firefox-*.tar.bz2 -C /opt\n")),Object(r.b)("p",null,"Create a shortcut to facilitate program execution"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-console"}),"$ sudo ln -sf /opt/firefox/firefox /usr/bin/firefox\n")),Object(r.b)("h3",{id:"setting-webide"},"Setting WebIDE"),Object(r.b)("p",null,"Firefox's WebIDE is a necessary development tool to inspect your app, as well as see the console, debugger, and others."),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Follow the instructions in ",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://developer.mozilla.org/en-US/docs/Tools/WebIDE"}),"WebIDE")," to setup and learn more about WebIDE.")),Object(r.b)("h3",{id:"installing-makeoptional"},"Installing make(",Object(r.b)("strong",{parentName:"h3"},"Optional"),")"),Object(r.b)("p",null,"Make is a necessary tool to run KaiOS. Execute the following commands on the terminal to install it."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-console"}),"$ wget http://ftp.us.debian.org/debian/pool/main/m/make-dfsg/make_3.81-8.2_amd64.deb\n$ sudo dpkg -i make_3.81-8.2_amd64.deb\n$ sudo apt-mark hold make\n")),Object(r.b)("h3",{id:"setting-the-required-architecturesoptional"},"Setting the required architectures(",Object(r.b)("strong",{parentName:"h3"},"Optional"),")"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-console"}),"$ sudo dpkg --add-architecture i386\n$ sudo dpkg --add-architecture amd64\n")),Object(r.b)("h3",{id:"installing-dependenciesoptional"},"Installing dependencies(",Object(r.b)("strong",{parentName:"h3"},"Optional"),")"),Object(r.b)("p",null,"There are some necessary dependencies to complete your environment for running Gaia. Execute the command below on your terminal and all these dependencies will be installed."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-console"}),"$ sudo apt install --no-install-recommends autoconf2.13 bison bzip2 ccache curl flex gawk gcc g++ g++-multilib git lib32ncurses5-dev lib32z1-dev libgconf2-dev zlib1g:amd64 zlib1g-dev:amd64 zlib1g:i386 zlib1g-dev:i386 libgl1-mesa-dev libx11-dev make zip lzop libxml2-utils openjdk-8-jdk nodejs unzip python\n")),Object(r.b)("h3",{id:"setting-ccacheoptional"},"Setting ccache(",Object(r.b)("strong",{parentName:"h3"},"Optional"),")"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-console"}),"$ ccache -M 10G\n")),Object(r.b)("h3",{id:"installing-adb-and-fastboot"},"Installing ADB and fastboot"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-console"}),"$ sudo apt install android-tools-adb android-tools-fastboot\n")),Object(r.b)("h3",{id:"setting-usb-access"},"Setting USB access"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-console"}),"$ wget -S -O - https://raw.githubusercontent.com/cm-b2g/B2G/1230463/tools/51-android.rules | sudo tee >/dev/null /etc/udev/rules.d/51-android.rules; sudo udevadm control --reload-rules\n")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Plug the device in your computer using a USB cable")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Use the command"))),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-console"}),"$ lsusb\n")),Object(r.b)("p",null,"on the terminal to get the Vendor ID. Example of a result:\nBus 001 Device 014: ID 22b8:2e76 Motorola PCS ===> vendor ID is 22b8"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Log in as root and edit this file: /etc/udev/rules.d/51-android.rules")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},'In the file above put a new line using the vendor ID that you got before. Example:\nSUBSYSTEM=="usb", ATTR{idVendor}=="22b8", MODE="0666", GROUP="plugdev"')),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Now execute:"))),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-console"}),"$ sudo chmod a+r /etc/udev/rules.d/51-android.rules\n")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Create the following file in your HOME dir (not as root)")),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-console"}),"$ nano ~/.android/adb_usb.ini\n")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Put the value of vendor ID on this file using hex format. Example: 0x22b8, where 22b8 is the vendor ID that you got before.")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Use the command 'adb devices' on the terminal to list all devices connected on your PC. Your device should be listed and is ready to receive Gaia apps or use it on WebIDE."))),Object(r.b)("h2",{id:"connection-errors"},"Connection Errors"),Object(r.b)("p",null,"For more information about the ",Object(r.b)("inlineCode",{parentName:"p"},"ADB connection fail")," error see ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://support.mozilla.org/en-US/kb/add-ons-disabled-or-fail-to-install-firefox"}),"this link")),Object(r.b)("p",null,Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://addons.mozilla.org/pt-BR/firefox/addon/disabled-add-on-fix-52-56/"}),"This extension")," will re-enable extensions that were disabled on May 3, 2019 for Firefox versions 52 - 56."))}p.isMDXComponent=!0},396:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var a=n(0),o=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var b=o.a.createContext({}),s=function(e){var t=o.a.useContext(b),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=s(e.components);return o.a.createElement(b.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},u=o.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,b=c(e,["components","mdxType","originalType","parentName"]),p=s(n),u=a,m=p["".concat(l,".").concat(u)]||p[u]||d[u]||r;return n?o.a.createElement(m,i(i({ref:t},b),{},{components:n})):o.a.createElement(m,i({ref:t},b))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,l=new Array(r);l[0]=u;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:a,l[1]=i;for(var b=2;b<r;b++)l[b]=n[b];return o.a.createElement.apply(null,l)}return o.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},397:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(23);t.default=function(){var e=Object(a.useContext)(o.a);if(null===e)throw new Error("Docusaurus context not provided");return e}},398:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return l}));var a=n(397),o=n(399);function r(){var e=Object(a.default)().siteConfig,t=(e=void 0===e?{}:e).baseUrl,n=void 0===t?"/":t,r=e.url;return{withBaseUrl:function(e,t){return function(e,t,n,a){var r=void 0===a?{}:a,l=r.forcePrependBaseUrl,i=void 0!==l&&l,c=r.absolute,b=void 0!==c&&c;if(!n)return n;if(n.startsWith("#"))return n;if(Object(o.b)(n))return n;if(i)return t+n;var s=n.startsWith(t)?n:t+n.replace(/^\//,"");return b?e+s:s}(r,n,e,t)}}}function l(e,t){return void 0===t&&(t={}),(0,r().withBaseUrl)(e,t)}},399:function(e,t,n){"use strict";function a(e){return!0===/^(\w*:|\/\/)/.test(e)}function o(e){return void 0!==e&&!a(e)}n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}))}}]);