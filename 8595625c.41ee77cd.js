(window.webpackJsonp=window.webpackJsonp||[]).push([[171],{246:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return s})),r.d(t,"metadata",(function(){return c})),r.d(t,"rightToc",(function(){return i})),r.d(t,"default",(function(){return l}));var n=r(3),a=r(8),o=(r(0),r(396)),s={id:"close",title:"DataStoreCursor.close()"},c={unversionedId:"06.api/web-apis/dataStore/datastorecursor/close",id:"06.api/web-apis/dataStore/datastorecursor/close",isDocsHomePage:!1,title:"DataStoreCursor.close()",description:"The close() method of the DataStoreCursor interface makes a request to terminate the cursor.",source:"@site/docs/06.api/web-apis/dataStore/datastorecursor/close.md",slug:"/06.api/web-apis/dataStore/datastorecursor/close",permalink:"/docs/06.api/web-apis/dataStore/datastorecursor/close",version:"current"},i=[{value:"Syntax",id:"syntax",children:[{value:"Returns",id:"returns",children:[]}]},{value:"Example",id:"example",children:[]}],u={rightToc:i};function l(e){var t=e.components,r=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},u,r,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"The close() method of the DataStoreCursor interface makes a request to terminate the cursor."),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},Object(o.b)("strong",{parentName:"p"},"Note:")," The Data Store API is available in Web Workers, from Firefox 32 onwards")),Object(o.b)("h2",{id:"syntax"},"Syntax"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"cursor.close();\n")),Object(o.b)("h3",{id:"returns"},"Returns"),Object(o.b)("p",null,"Void."),Object(o.b)("h2",{id:"example"},"Example"),Object(o.b)("p",null,"In the following example, we run DataStore.sync() to create a DataStoreCursor object allowing us to loop through any additions since the code last accessed the data store and update the data display as necessary."),Object(o.b)("p",null,"The cursor is passed to the runNextTask() function, which calls DataStoreCursor.next to start the process of managing the next task \u2014 the resulting DataStoreTask object is passed to the manageTask() function to work out what to do with it. runNextTask() is then called repeatedly by manageTask() until the cursor has finished working through all the records. If an operation of type clear is found, cursor.close() is called to close the cursor."),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"var cursor = stores[0].sync();\nrunNextTask(cursor);\n\nfunction runNextTask(cursor) {\n  cursor.next().then(function(task) {\n    manageTask(cursor, task);\n  });\n}\n\nfunction manageTask(cursor, task) {\n  if (task.operation == 'done') {\n    // Finished adding contacts!\n    return;\n  }\n\n  if (task.operation == 'add') {\n    // Add the contacts that are different to how it was before\n    displayExisting(task.id, task.data);\n  }\n\n  if (task.operation == 'clear') {\n    // If one of the changes deletes the entire data store's contents,\n    // then close the cursor\n    cursor.close();\n  }\n\n  runNextTask(cursor);\n}\n")))}l.isMDXComponent=!0},396:function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return b}));var n=r(0),a=r.n(n);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var u=a.a.createContext({}),l=function(e){var t=a.a.useContext(u),r=t;return e&&(r="function"==typeof e?e(t):c(c({},t),e)),r},p=function(e){var t=l(e.components);return a.a.createElement(u.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},f=a.a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),p=l(r),f=n,b=p["".concat(s,".").concat(f)]||p[f]||d[f]||o;return r?a.a.createElement(b,c(c({ref:t},u),{},{components:r})):a.a.createElement(b,c({ref:t},u))}));function b(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,s=new Array(o);s[0]=f;var c={};for(var i in t)hasOwnProperty.call(t,i)&&(c[i]=t[i]);c.originalType=e,c.mdxType="string"==typeof e?e:n,s[1]=c;for(var u=2;u<o;u++)s[u]=r[u];return a.a.createElement.apply(null,s)}return a.a.createElement.apply(null,r)}f.displayName="MDXCreateElement"}}]);